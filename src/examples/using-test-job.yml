description: |
  An example of running a pipenv based project with pytest, then using twine to publish to pypi.
  The project using these args would need pytest as a dev dependency in its Pipfile.
  Your CircleCI project settings need to have the environment variables for twine auth.
usage:
  version: 2.1
  orbs:
    python: circleci/python@2.1.1
  workflows:
    main:
      jobs:
        - python/test:
            pkg-manager: pipenv
            args: --dev
            test-tool: pytest
        - publish

  jobs:
    publish:
      executor: python/default
      steps:
        - checkout
        - python/dist
        - run: pip install twine && twine upload dist/*
